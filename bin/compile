#!/usr/bin/env bash

BUILD_DIR=${1:-}
CACHE_DIR=${2:-}
ENV_DIR=${3:-}
BP_DIR=$(cd "$(dirname "${0:-}")"; cd ..; pwd)

YARN_VERSION="${YARN_VERSION:-1.22.15}"
YARN_ARCHIVE="https://s3.amazonaws.com/heroku-nodebin/yarn/release/yarn-v${YARN_VERSION}.tar.gz"

header() {
  echo -e "\n" || true
  echo "-----> $*" || true
}

output() {
  while IFS= read -r LINE; do
    # do not indent headers that are being piped through the output
    if [[ "$LINE" =~ ^-----\>.* ]]; then
      echo "$LINE" || true
    else
      echo "       $LINE" || true
    fi
  done
}

header "heroku-buildpack-yarn debug"

ls -la $BUILD_DIR/ | output
ls -la $BUILD_DIR/node_modules/ | output

exit 1
